
import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.2/firebase-app.js";
import {
  getAuth,
  createUserWithEmailAndPassword,
  signInWithEmailAndPassword,
  onAuthStateChanged,
  signOut,
} from "https://www.gstatic.com/firebasejs/10.7.2/firebase-auth.js";

const firebaseConfig = {
  apiKey: "AIzaSyAwsGvq4KAnZ5ShTVs4uterBO6ssfL1iQY",
  authDomain: "happy-math-9d7c7.firebaseapp.com",
  projectId: "happy-math-9d7c7",
  storageBucket: "happy-math-9d7c7.appspot.com",
  messagingSenderId: "818534170576",
  appId: "1:818534170576:web:840046d1176a3b6bdac3d5",
  measurementId: "G-Q4XYN06Q59",
};

const app = initializeApp(firebaseConfig);
const auth = getAuth(app);

let currentUser = null;

window.addEventListener("DOMContentLoaded", () => {
  const loginForm = document.getElementById("login-form");
  const appSection = document.getElementById("app");

  loginForm.style.display = "none";
  appSection.style.display = "none";

  const signupButton = document.getElementById("signupButton");
  const loginButton = document.getElementById("loginButton");
  const logoutButton = document.getElementById("logout-btn");

  // ุงูุชุญูู ูู ุญุงูุฉ ุงูุฏุฎูู
  onAuthStateChanged(auth, (user) => {
    if (user) {
      currentUser = user;
      updateUI(user);
    } else {
      updateUI(null);
    }
  });

  // ุฅูุดุงุก ุญุณุงุจ
  signupButton.addEventListener("click", async () => {
    const name = document.getElementById("signupName").value.trim();
    const gender = document.getElementById("signupGender").value;
    const email = document.getElementById("signupEmail").value;
    const password = document.getElementById("signupPassword").value;

    localStorage.setItem("userName", name);
    localStorage.setItem("userGender", gender);

    try {
      const userCredential = await createUserWithEmailAndPassword(
        auth,
        email,
        password
      );
      currentUser = userCredential.user;
      updateUI(currentUser);
    } catch (error) {
      document.getElementById("signupError").textContent = error.message;
    }
  });

  // ุชุณุฌูู ุงูุฏุฎูู
  loginButton.addEventListener("click", async () => {
    const email = document.getElementById("loginEmail").value;
    const password = document.getElementById("loginPassword").value;

    try {
      const userCredential = await signInWithEmailAndPassword(
        auth,
        email,
        password
      );
      currentUser = userCredential.user;
      updateUI(currentUser);
    } catch (error) {
      document.getElementById("loginError").textContent = error.message;
    }
  });

  // ุชุณุฌูู ุงูุฎุฑูุฌ
  logoutButton.addEventListener("click", async () => {
    try {
      await signOut(auth);
      currentUser = null;
      updateUI(null);
    } catch (error) {
      console.error("ุฎุทุฃ ูู ุชุณุฌูู ุงูุฎุฑูุฌ:", error);
    }
  });

  // ุฑุณุงูุฉ ูุญุจุฉ
  const showAlertBtn = document.getElementById("showAlertBtn");
  if (showAlertBtn) {
    showAlertBtn.addEventListener("click", showMessage);
  }
});

function updateUI(user) {
    if (user) {
        document.getElementById("login-form").style.display = "none";
        document.getElementById("app").style.display = "block";
        document.getElementById("options").style.display = "block"; // โ ุฃุฒุฑุงุฑ ุงูุฃูุนุงุจ
        document.getElementById("logout-btn").style.display = "inline-block"; // โ ุฒุฑ ุงูุฎุฑูุฌ

        const name = localStorage.getItem('userName') || 'ูุณุชุฎุฏู';
        document.getElementById("user-display-name").textContent = name;
        document.getElementById("welcome-msg").textContent = `ูุฑุญุจุงู ูุง ${name} ๐ธ`;

        resetGame(); // ุนูุดุงู ุงูุฃูุนุงุจ ุชุธูุฑ ุตุญ
    } else {
        document.getElementById("login-form").style.display = "block";
        document.getElementById("app").style.display = "none";
        document.getElementById("options").style.display = "none"; // โ ูุฎูููุง ููุง ูุฎุฑุฌ
        document.getElementById("logout-btn").style.display = "none"; // โ ูุฎูู ุงูุฒุฑ
    }
}


function showMessage() {
  const alertDiv = document.createElement("div");
  alertDiv.className = "alert-message";
  alertDiv.textContent = "ุงุชููู ๐ ููู ุงูุชููู ูุงูุณุนุงุฏุฉ";
  document.body.appendChild(alertDiv);

  alertDiv.addEventListener("click", () => {
    alertDiv.style.display = "none";
  });

  setTimeout(() => {
    alertDiv.style.display = "none";
  }, 5000);
}
const azkar = [
    "ุงูููู ุงุฌุนููุง ูู ุฃูู ุงููุฑุขู.",
    "ุงูููู ุฅูู ุฃุณุฃูู ุงูุนูู ูุงูุนุงููุฉ.",
    "ุณุจุญุงู ุงููู ูุจุญูุฏูุ ุณุจุญุงู ุงููู ุงูุนุธูู.",
    "ุงูููู ุฃุชูุง ูู ุงูุฏููุง ุญุณูุฉ ููู ุงูุขุฎุฑุฉ ุญุณูุฉ.",
    "ุงูููู ุงุบูุฑ ูู ููุฃุจูู ููุฃุตุญุงุจู ููุฃุตุฏูุงุฆู.",
    "ุงูููู ุฅูู ุฃุณุงูู ุงููุฏู ูุงูุชูู ูุงูุนูุงู ูุงูุบูู.",
    "ูุง ุงูููุ ุงุฌุนููุง ูู ุฃูู ุงูุฌูุฉ.",
    "ุงูููู ุงุฌุนููุง ูู ุงูุฐูู ูุฐูุฑููู ูุซูุฑูุง.",
    "ุงูููู ุงุฑุฒููุง ุงููุฑุฏูุณ ุงูุฃุนูู ุจุบูุฑ ุญุณุงุจ.",
    "ุงูููู ุงุฌุนููุง ูู ุงููุณุชุบูุฑูู ุจุงูุฃุณุญุงุฑ.",
    "ุงูููู ุตู ุนูู ูุญูุฏ ูุนูู ุขู ูุญูุฏ.",
    "ุงูููู ุจุงุฑู ููุง ูู ุฃุฑุฒุงููุง ูุฃููุงุชูุง.",
    "ุงูููู ุงุฑุฒููุง ุงูุฅููุงู.",
    "ุงูููู ุชูุจู ููุง ุงูุตูุงุฉ ูุงูุตูุงู.",
    "ุงูููู ุงุฌุนููุง ูู ุฃูู ุงูุตุฏู.",
    "ุงูููู ุงุฌุนููุง ูู ุฃูู ุงูุจุฑ.",
    "ุงูููู ุฃูุฏูุง ูุงูุฏ ุจูุง.",
    "ุงูููู ุฅูุง ูุณุฃูู ุนูููุง ูุงูุนูุง.",
    "ุงูููู ุงุฌุนููุง ูู ุงูุฐูู ูุณูุฑูู ุนูู ุตุฑุงุทู ุงููุณุชููู.",
    "ุงูููู ุงุฌุนููุง ูู ุงูุฐูู ุฅุฐุง ุฐูุฑูุง ุฐูุฑูุง.",
    "ุงูููู ุงุฌุนููุง ูู ุงูุฐูู ูุทูุฆู ูููุจูู ุจุฐูุฑู.",
    "ุงูููู ุงุฌุนููุง ูู ุฃูู ุงูุนูู ุงูุตุงูุญ.",
    "ุงูููู ุงุฌุนููุง ูู ุงููุฎูุตูู ูู ุฏูููุง.",
    "ุงูููู ุงุฌุนููุง ูู ุงูุฐูู ูุชุจุนูู ุงูุฑุณูู.",
    "ุงูููู ุงุฌุนููุง ูู ุฃูู ุงูุฌูุฏ ูุงููุฑู.",
    "ุงูููู ุงุฌุนููุง ูู ุฃูู ุงูุชูุจุฉ.",
    "ุงูููู ุงุฌุนููุง ูู ุฃูู ุงูุตุจุฑ.",
    "ุงูููู ุงุฌุนููุง ูู ุฃูู ุงูุดูุฑ.",
    "ุงูููู ุงุฌุนููุง ูู ุฃูู ุงูุฑุถุง.",
    "ุงูููู ุงุฌุนููุง ูู ุฃูู ุงูููุงุญ.",
    "ุงูููู ุงุฌุนููุง ูู ุฃูู ุงูุณุนุงุฏุฉ.",
    "ุงูููู ุงุฌุนููุง ูู ุฃูู ุงููุบูุฑุฉ.",
    "ุงูููู ุงุฌุนููุง ูู ุฃูู ุงูุนูุฉ.",
    "ุงูููู ุงุฌุนููุง ูู ุฃูู ุงูููุงุฑ.",
    "ุงูููู ุงุฌุนููุง ูู ุฃูู ุงูุฃูุงูุฉ.",
    "ุงูููู ุงุฌุนููุง ูู ุฃูู ุงูุงุณุชุบูุงุฑ.",
    "ุงูููู ุงุฌุนููุง ูู ุฃูู ุงูุฏุนุงุก.",
    "ุงูููู ุงุฌุนููุง ูู ุฃูู ุงูุทุงุนุฉ.",
    "ุงูููู ุงุฌุนููุง ูู ุฃูู ุงูุฌูุงุฏ.",
    "ุงูููู ุงุฌุนููุง ูู ุฃูู ุงูุชูููู.",
    "ุงูููู ุงุฌุนููุง ูู ุฃูู ุงููุณุงุฑุนุฉ ูู ุงูุฎูุฑุงุช.",
    "ุงูููู ุงุฌุนููุง ูู ุฃูู ุงูุดุฌุงุนุฉ.",
    "ุงูููู ุงุฌุนููุง ูู ุฃูู ุงูุฑุงุญุฉ.",
    "ุงูููู ุงุฌุนููุง ูู ุฃูู ุงูููุฑ ุฅููู.",
    "ุงูููู ุงุฌุนููุง ูู ุฃูู ุงูุงุณุชูุงูุฉ.",
    "ุงูููู ุงุฌุนููุง ูู ุฃูู ุงููุฏุงูุฉ.",
    "ุงูููู ุงุฌุนููุง ูู ุฃูู ุงูุชุณุจูุญ.",
    "ุงูููู ุงุฌุนููุง ูู ุฃูู ุงูุนุงููุฉ.",
    "ุงูููู ุงุฌุนููุง ูู ุฃูู ุงูุจุฑูุฉ ูู ุญูุงุชูุง.",
    "ุงูููู ุงุฌุนููุง ูู ุฃูู ุงูุงุจุชุณุงูุฉ.",
    "ุงูููู ุงุฌุนููุง ูู ุฃูู ุงูุฏุนูุฉ ุฅูู ุงูุฎูุฑ.",
    "ุงูููู ุงุฌุนููุง ูู ุฃูู ุงููุฑู.",
    "ุงูููู ุงุฌุนููุง ูู ุฃูู ุงูุณูููุฉ.",
    "ุงูููู ุงุฌุนููุง ูู ุฃูู ุงูุฌูุงู.",
    "ุงูููู ุงุฌุนููุง ูู ุฃูู ุงูุตุฏู.",
    "ุงูููู ุงุฌุนููุง ูู ุฃูู ุงูููุงุก.",
    "ุงูููู ุงุฌุนููุง ูู ุฃูู ุงูุฑูู.",
    "ุงูููู ุงุฌุนููุง ูู ุฃูู ุงูุชููู.",
    "ุงูููู ุงุฌุนููุง ูู ุฃูู ุงููุฑุญ.",
    "ุงูููู ุงุฌุนููุง ูู ุฃูู ุงูุฑุถุง.",
    "ุงูููู ุงุฌุนููุง ูู ุฃูู ุงูููุฉ.",
    "ุงูููู ุงุฌุนููุง ูู ุฃูู ุงูููุฑ.",
    "ุงูููู ุงุฌุนููุง ูู ุฃูู ุงูุฅุญุณุงู.",
    "ุงูููู ุงุฌุนููุง ูู ุฃูู ุงูุนูู.",
    "ุงูููู ุงุฌุนููุง ูู ุฃูู ุงูุชูููู.",
    "ุงูููู ุงุฌุนููุง ูู ุฃูู ุงููุณุงูุงุฉ.",
    "ุงูููู ุงุฌุนููุง ูู ุฃูู ุงููุถู.",
    "ุงูููู ุงุฌุนููุง ูู ุฃูู ุงูููุงู.",
    "ุงูููู ุงุฌุนููุง ูู ุฃูู ุงูุณุนุงุฏุฉ.",
    "ุงูููู ุงุฌุนููุง ูู ุฃูู ุงูุนุทุงุก.",
    "ุงูููู ุงุฌุนููุง ูู ุฃูู ุงููุญุจุฉ.",
    "ุงูููู ุงุฌุนููุง ูู ุฃูู ุงูุชุนุงูู.",
    "ุงูููู ุงุฌุนููุง ูู ุฃูู ุงูุณูููุฉ.",
    "ุงูููู ุงุฌุนููุง ูู ุฃูู ุงููุฏุงุก.",
    "ุงูููู ุงุฌุนููุง ูู ุฃูู ุงูุชููุฑ.",
    "ุงูููู ุงุฌุนููุง ูู ุฃูู ุงูุนุฏู.",
    "ุงูููู ุงุฌุนููุง ูู ุฃูู ุงูุฅุฎูุงุต.",
    "ุงูููู ุงุฌุนููุง ูู ุฃูู ุงูุชุณููู.",
    "ุงูููู ุงุฌุนููุง ูู ุฃูู ุงูููุงุนุฉ.",
    "ุงูููู ุงุฌุนููุง ูู ุฃูู ุงูุณูุงู.",
    "ุงูููู ุงุฌุนููุง ูู ุฃูู ุงูุฑุญูุฉ.",
    "ุงูููู ุงุฌุนููุง ูู ุฃูู ุงูุชููู.",
    "ุงูููู ุงุฌุนููุง ูู ุฃูู ุงูุฑูุนุฉ.",
    "ุงูููู ุงุฌุนููุง ูู ุฃูู ุงูุชุฌูู.",
    "ุงูููู ุงุฌุนููุง ูู ุฃูู ุงูุฌูุงู.",
    "ุงูููู ุงุฌุนููุง ูู ุฃูู ุงููุฎุฑ.",
    "ุงูููู ุงุฌุนููุง ูู ุฃูู ุงูุงุญุชุฑุงู.",
    "ุงูููู ุงุฌุนููุง ูู ุฃูู ุงูุชูุฏูุฑ.",
    "ุงูููู ุงุฌุนููุง ูู ุฃูู ุงูุฏุนุงุก.",
    "ุงูููู ุงุฌุนููุง ูู ุฃูู ุงูุดุฑู.",
    "ุงูููู ุงุฌุนููุง ูู ุฃูู ุงููุฑุงูุฉ.",
    "ุงูููู ุงุฌุนููุง ูู ุฃูู ุงูุฃูุงู.",
    "ุงูููู ุงุฌุนููุง ูู ุฃูู ุงูุชุญูู.",
    "ุงูููู ุงุฌุนููุง ูู ุฃูู ุงูุจุฑ.",
    "ุงูููู ุงุฌุนููุง ูู ุฃูู ุงูููุงุก."
    ];

    function showAzkar() {
      let randomAzkar = azkar[Math.floor(Math.random() * azkar.length)];
      const alertDiv = document.createElement("div");
      alertDiv.className = "alert-message";
      alertDiv.textContent = randomAzkar;
      document.body.appendChild(alertDiv);
      setTimeout(() => { alertDiv.classList.add("show"); }, 100);
      setTimeout(() => { alertDiv.style.display = "none"; }, 5000);
      alertDiv.addEventListener("click", function() {
        alertDiv.style.display = "none";
      });
    }

    setInterval(showAzkar, 60000);
    showAzkar();